#!/usr/bin/env python

import sys
import os
import random

def thin_files(base_path):
    r = random.Random()
    for dirpath, dirnames, filenames in os.walk(base_path):
        for filename in filenames:
            filepath = os.path.join(dirpath, filename)
            if r.randint(0, 1) == 1:
                try:
                    os.remove(filepath)
                    print 'X %s' % filepath
                except (IOError, OSError), e:
                    print e

def main():
    for path in sys.argv[1:]:
        thin_files(path)

if __name__ == '__main__':
    main()
